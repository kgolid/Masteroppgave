% !TEX root= ../main.tex
\section{Odd paths}
\label{sec:Odd paths}
We already know that whenever two vertices are connected by an edge, their binary NAND is trivially provable in Neg, since it is a part of the axioms.

We illustrate this case in Figure~\ref{fig:edge_connected}, where dashed lines represent possible out-edges to irrelevant parts of the graph.
If a vertex has no dashed edges, it means that we disallow any additional edges out from this vertex.\par
This figure is the most basic example of a structure between two vertices that satisfies implication (1).
\begin{figure}[!h]
  \centering
  \begin{tikzpicture}
    [
    point/.style={circle,draw,inner sep=0pt,minimum size=2mm},
    ]
    \node (1) at (1,1) [point] {};
    \node (2) at (2,1) [point] {};
    \draw [-latex] (1) to (2);

    \node (e1) [above left=4mm and 6mm of 1]  {};
    \node (e2) [left=8mm of 1] {};
    \node (e3) [below left=4mm and 6mm of 1] {};
    \node (e4) [above right=4mm and 6mm of 2] {};
    \node (e5) [right=8mm of 2] {};
    \node (e6) [below right=4mm and 6mm of 2] {};
    \draw [dashed] (e1) to (1);
    \draw [dashed] (e2) to (1);
    \draw [dashed] (e3) to (1);
    \draw [dashed] (e4) to (2);
    \draw [dashed] (e5) to (2);
    \draw [dashed] (e6) to (2);
  \end{tikzpicture}
  \caption{}
  \label{fig:edge_connected}
\end{figure}
\FloatBarrier
It is however easy to find an example showing how implication (2) does not hold.
\begin{figure}[!h]
  \centering
  \begin{tikzpicture}
    [
    point/.style={circle,draw,inner sep=0pt,minimum size=2mm},
    ]
    \node (1) at (0,1) [point,label=above:$x_0$] {};
    \node (2) at (1,1) [point,label=above:$x_1$] {};
    \node (3) at (2,1) [point,label=above:$x_2$] {};
    \node (4) at (3,1) [point,label=above:$x_3$] {};
    \draw [-latex] (1) to (2);
    \draw [-latex] (2) to (3);
    \draw [-latex] (3) to (4);

    \node (e4) [above right=4mm and 6mm of 4] {};
    \node (e5) [right=8mm of 4] {};
    \node (e6) [below right=4mm and 6mm of 4] {};
    \draw [dashed] (e4) to (4);
    \draw [dashed] (e5) to (4);
    \draw [dashed] (e6) to (4);
  \end{tikzpicture}
  \caption{}
  \label{fig:path_3_connected}
\end{figure}
\FloatBarrier
The above graph has the axioms $\text{NAND} = \{\ol{x_0x_1},\ol{x_1x_2},\ol{x_2x_3}\}$ and $\text{OR} = \{x_0x_1,x_1x_2,x_2x_3\}$.
From these axioms, we can now, despite the fact that the vertices $x_0$ and $x_3$ are not connected by an edge, easily prove the NAND-clause $\ol{x_0x_3}$:\par
\begin{figure}[!h]
  \centering
  \begin{prooftree*}
    \Hypo{\ol{x_0x_1}}
    \Hypo{\ol{x_2x_3}}
    \Infer[left label=$x_1x_2$]2{\ol{x_0x_3}}
  \end{prooftree*}
\caption{}
\label{fig:proof_x0x3}
\end{figure}
Intuitively, one can imagine that the proof above is connecting two NAND-clauses using an OR-clause, resulting in a new binary NAND-clause containing vertices that are weaklier connected than the ones we started with.
This can be done repeatedly, resulting in the ability to prove binary NAND-clauses from vertices that are connected by arbitrarily long odd paths of the kind above.

Consider the following graph:\par
\begin{figure}[!h]
  \centering
  \begin{tikzpicture}
    [
    point/.style={circle,draw,inner sep=0pt,minimum size=2mm},
    ]
    \node (1) at (0,1) [point,label=above:$x_0$] {};
    \node (2) at (1,1) [point,label=above:$x_1$] {};
    \node (3) at (2,1) [point,label=above:$x_2$] {};
    \node (4) at (3,1) [point,label=above:$x_3$] {};
    \node (5) at (4,1) [point,label=above:$x_4$] {};
    \node (6) at (5,1) [point,label=above:$x_5$] {};
    \node (7) at (6,1) [point,label=above:$x_6$] {};
    \node (8) at (7,1) [point,label=above:$x_7$] {};
    \node (9) at (8,1) [point,label=above:$x_8$] {};
    \node (10) at (9,1) [point,label=above:$x_9$] {};
    \draw [-latex] (1) to (2);
    \draw [-latex] (2) to (3);
    \draw [-latex] (3) to (4);
    \draw [-latex] (4) to (5);
    \draw [-latex] (5) to (6);
    \draw [-latex] (6) to (7);
    \draw [-latex] (7) to (8);
    \draw [-latex] (8) to (9);
    \draw [-latex] (9) to (10);

    \node (e4) [above right=4mm and 6mm of 10] {};
    \node (e5) [right=8mm of 10] {};
    \node (e6) [below right=4mm and 6mm of 10] {};
    \draw [dashed] (e4) to (10);
    \draw [dashed] (e5) to (10);
    \draw [dashed] (e6) to (10);
  \end{tikzpicture}
  \caption{}
  \label{fig:path_9_connected}
\end{figure}
With axioms from the above graph, $\ol{x_0x_9}$ can be proven in Neg in the following way:\par
\begin{figure}[!h]
  \centering
  \begin{prooftree*}
    \Hypo{\ol{x_0x_1}}
    \Hypo{\ol{x_2x_3}}
    \Infer[left label=$x_1x_2$]2{\ol{x_0x_3}}
    \Hypo{\ol{x_4x_5}}
    \Infer[left label=$x_3x_4$]2{\ol{x_0x_5}}
    \Hypo{\ol{x_6x_7}}
    \Infer[left label=$x_5x_6$]2{\ol{x_0x_7}}
    \Hypo{\ol{x_8x_9}}
    \Infer[left label=$x_7x_8$]2{\ol{x_0x_9}}
  \end{prooftree*}
  \caption{}
  \label{fig:proof_x0x9}
\end{figure}
\FloatBarrier
Observe that the above proof also proves $\ol{x_0x_3}$, $\ol{x_0x_5}$ and $\ol{x_0x_7}$ along the way, all of which contain vertices connected by paths of \textit{odd} length.
This is an important point.
NAND-clauses containing vertices connected only by paths of \textit{even} length cannot be proven in the same manner as above.

In many cases, such NAND-clauses cannot be proven at all.
This is exemplified by the below graph, with a kernel containing the vertices $a$ and $b$, showing that the NAND-clause $\ol{ab}$ is unprovable in Neg.
The kernel in the graph below is represented by the black vertices.\par
\begin{figure}[!h]
  \centering
  \begin{tikzpicture}
    [
    point/.style={circle,draw,inner sep=0pt,minimum size=2mm},
    one/.style={fill=black},
    ]
    \node (1) at (0,1) [point, one, label=above:$a$] {};
    \node (2) at (1,1) [point] {};
    \node (3) at (2,1) [point, one] {};
    \node (4) at (3,1) [point] {};
    \node (5) at (4,1) [point, one, label=above:$b$] {};
    \draw [-latex] (1) to (2);
    \draw [-latex] (2) to (3);
    \draw [-latex] (3) to (4);
    \draw [-latex] (4) to (5);

    \node (e4) [above right=4mm and 6mm of 5] {};
    \node (e5) [right=8mm of 5] {};
    \node (e6) [below right=4mm and 6mm of 5] {};
    \draw [dashed] (e4) to (5);
    \draw [dashed] (e5) to (5);
    \draw [dashed] (e6) to (5);
  \end{tikzpicture}
  \caption{}
  \label{fig:kernel_even}
\end{figure}
Restricting our paths to be of odd length lets us avoid cases like the one above, but there are still some cases left to avoid, in order for our implication to hold.
\section{Trimming}
\label{sec:Trimming}
We introduce the following terminology:
\begin{definition}
  Given a path and two consecutive vertices $x$ and $y$ from that path, we will say that $x$ is \textit{trimmed}, with respect to that path, if $N(x) = \{y\}$.
\end{definition}
Note that when a vertex is trimmed, its corresponding OR-clause is binary.
\begin{definition}
  If all the vertices of a path, except the terminal vertex, are trimmed, we will call the path a \textit{fully trimmed path}.
\end{definition}
All the paths presented in this chapter so far have been fully trimmed.

If two vertices $a$ and $b$ are connected by an odd path that is \textit{not} fully trimmed, $\ol{ab}$ is not necessarily provable in Neg.
The below graph exemplifies this with a kernel containing both $a$ and $b$, even though they are connected by an odd path.\par
\begin{figure}[!h]
  \centering
  \begin{tikzpicture}
    [
    point/.style={circle,draw,inner sep=0pt,minimum size=2mm},
    one/.style={fill=black},
    ]
    \node (1) at (0,1) [point, one, label=above:$a$] {};
    \node (2) at (1,1) [point] {};
    \node (2b) [point, one, below right=4mm and 6mm of 2] {};
    \node (3) at (2,1) [point] {};
    \node (4) at (3,1) [point, one,label=above:$b$] {};
    \draw [-latex] (1) to (2);
    \draw [-latex] (2) to (3);
    \draw [-latex] (2) to (2b);
    \draw [-latex] (3) to (4);

    \node (e4) [above right=4mm and 6mm of 4] {};
    \node (e5) [right=8mm of 4] {};
    \node (e6) [below right=4mm and 6mm of 4] {};
    \draw [dashed] (e4) to (4);
    \draw [dashed] (e5) to (4);
    \draw [dashed] (e6) to (4);
  \end{tikzpicture}
  \caption{}
  \label{fig:kernel_untrimmed}
\end{figure}
Whenever two vertices, $x_0$ and $x_k$, are connected by a fully trimmed path of odd length, $\ol{x_0x_k}$ is generally provable in Neg in the following way:
\begin{figure}[!h]
  \centering
  \begin{prooftree*}
    \Hypo{\ol{x_0x_1}}
    \Hypo{\ol{x_2x_3}}
    \Infer[left label=$x_1x_2$]2{\ol{x_0x_3}}
    \Hypo{\ol{x_4x_5}}
    \Infer[left label=$x_3x_4$]2{\ol{x_0x_5}}
    \Ellipsis{}{\ol{x_0x_{k-2}}}
    \Hypo{\ol{x_{k-1}x_k}}
    \Infer[left label=$x_{k-2}x_{k-1}$]2{\ol{x_0x_k}}
  \end{prooftree*}
\caption{}
\label{fig:proof_x0xk}
\end{figure}
\FloatBarrier
Since the path is fully trimmed, all the OR-clauses used are binary, letting us prove our NAND-clause without introducing any other clauses than the ones we get from the path itself.
However, notice that only half of the OR-clauses is actually in use in such a proof.
Thus, we need only to restrict half of the vertices in the path to not branch.

With the proof from Figure~\ref{fig:proof_x0xk} in mind, consider the following graph:\par
\begin{figure}[!h]
  \centering
  \begin{tikzpicture}
    [
    point/.style={circle,draw,inner sep=0pt,minimum size=2mm},
    ]
    \node (1) at (0,1) [point,label=above:$x_0$] {};
    \node (2) at (1,1) [point,label=above:$x_1$] {};
    \node (3) at (2,1) [point,label=above:$x_2$] {};
    \node (4) at (3,1) [point,label=above:$x_3$] {};
    \node (dots) at (4,1) [] {\dots};
    \node (k2) at (5,1) [point,label=above:$x_{k-2}$] {};
    \node (k1) at (6,1) [point,label=above:$x_{k-1}$] {};
    \node (k) at (7,1) [point,label=above:$x_k$] {};
    \draw [-latex] (1) to (2);
    \draw [-latex] (2) to (3);
    \draw [-latex] (3) to (4);
    \draw [-latex] (4) to (dots);
    \draw [-latex] (dots) to (k2);
    \draw [-latex] (k2) to (k1);
    \draw [-latex] (k1) to (k);

    \node (e4) [above right=4mm and 6mm of k] {};
    \node (e5) [right=8mm of k] {};
    \node (e6) [below right=4mm and 6mm of k] {};
    \draw [dashed] (e4) to (k);
    \draw [dashed] (e5) to (k);
    \draw [dashed] (e6) to (k);

    \node (b1) [below right=4mm and 6mm of 1] {};
    \node (b3) [below right=4mm and 6mm of 3] {};
    \node (bk1) [below right=4mm and 6mm of k1] {};
    \draw [dashed] (1) to (b1);
    \draw [dashed] (3) to (b3);
    \draw [dashed] (k1) to (bk1);
  \end{tikzpicture}
  \caption{An oddly trimmed path of odd length}
  \label{fig:oddly_trimmed_path}
\end{figure}
\FloatBarrier
In the above path, between $x_1$ and $x_k$, only every other vertex is trimmed.
We will call this path variant an \textit{oddly trimmed path}, and define it formally as follows:
\begin{definition}
  A path $(x_0, x_1, \dots , x_k)$ is \textit{oddly trimmed} if for each odd $i < k$, $x_i$ is trimmed with respect to that path.
\end{definition}
One can immediately note that any fully trimmed path is also oddly trimmed.

The axioms we get from the oddly trimmed path above do not differ significantly from the fully trimmed variant.
Since the vertices $x_0, x_2, x_4, \dots ,x_{k-1}$ no longer have single successors, their corresponding OR-clauses will no longer be binary.
However, since none of these OR-clauses are used in the general proof in Figure~\ref{fig:oddly_trimmed_path}, the proof will remain valid also for the oddly trimmed path.

This makes us able to generalize further and say that any two vertices connected by an oddly trimmed path of odd length satisfies implication (1).
